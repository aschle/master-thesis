%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Theoretical Background}
\label{ch:bg}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The following chapter gives a short introduction into social network analysis (SNA). It introduces animal interaction networks as a special type of network. It defines terms and concepts used throughout this work and explains networks metrics and algorithms of which we will make use of.

A \emph{social network} is a representation of a social structure comprising actors such as individuals, affiliations, as well as their social interactions.
The network model conceptualizes social, economic, or political structures as lasting patterns of interactions between actors~\cite{wasserman1994social}.
In mathematical terms, networks are graphs, and thus consist of \emph{nodes} (vertex, representing individuals), and \emph{links} (edges, relationships or interactions).
Social network analysis provides a set of methods, measures and theories, borrowed from network and graph theory, to investigate social structures and its dynamics.


This work is focusing on the special case of animal social networks.
Networks where individuals are nodes and edges are defined as interaction events between individuals are called \emph{interaction networks}, sometimes also contact networks. 
According to~\textcite{charbonneau2013social} those interactions used as an edge can be of four different types when looking at animal networks: spatial proximity, physical contact (usually with antennae, “antennation”), a food exchange event (trophallaxis), or specific communication signals.

I decided to use spatial proximity as the interaction type for edges.
Those edges can be directed (e.g. trophallaxis) or undirected, weighted or unweighted. As edge weights the frequency and duration of interactions are commonly used.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Network Measure, Metrics and Algorithms}
\label{sec:definitions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The definitions are mainly taken from~\textcite{barabasi2016network} for general definitions and from~\textcite{wey2008social} for more animal specific definitions, if not stated otherwise. The measures are for undirected and weighted graphs.


\begin{description}
\item[Network size] $N$ is the total number of nodes (animals).

\item[Number of links] $L$ is the total number of links (social interaction).

\item[Edge weight] $w_i$ of an edge $l_i$ is an indicator of how important that edge is.

\item[Density] $D$ is the number of realized links divided by the number
of theoretically possible links is defined as $D=\frac{2L}{N(N-1)}$.

\item[Component] is a subnet of nodes in a network, so that there is a path between any two nodes that belong to the component.

\item[Degree] $k_i$ of a node $n_i$ represents the number of edges a node has; so the number of other animals this animal interacts with.

\item[Average Degree] $\langle k \rangle$

\item[Strength] $s_i$ of a node is also called the weighted degree. It measures the total weight of edges connected to a node $n_i$ and is definded as $s_i = \sum_{j=1}^{n}w_{ij}$ according to~\textcite{barrat2004architecture}

\item[Average Strength] $\langle s \rangle$

\item[Path length] $d$ the shortest number of links between two nodes.

\item[Average path length] $\langle d \rangle$ is the average of all shortest path between all pairs of nodes.

\item[Diameter] $d_{\texttt{max}}$ is the longest of all path length. The distance between the two furthest nodes, the longest possible path length in the network.

\item[Global clustering coefficient] $C_\Delta$ also called transitivity. According to~\cite{wasserman1994social} is is defined as $C_\Delta = \frac{3 \times \texttt{number of triangles}}{\texttt{number of connected triples}}$.

\item[Local clustering coefficient] $c_i$ of a node $n_i$ quantifies how close its neighbours are to being a clique (complete graph).

\end{description}

When looking at the networks local structure (node level), it is possible to identify nodes, which are important or central to the network, regarding different aspects. This concept is called \emph{centrality} and measures the influence of a node in a network.~\cite{newman2010networks}

In the course of analysing networks and their local node level structures, you will find and encounter the most important (central) nodes and vertices by indicators of centrality. These indicators give values to the nodes and therefore they can be listed in a way of importance.

\paragraph{Degree Centrality}
Degree centrality $C^i_D$ of a node $n_i$ is the normalized degree $k_i$ in relation to the whole network, it is calculated as follows:

$$C^i_D=\frac{k_i}{N-1}$$

\paragraph{Eigenvector Centrality}
The eigenvector centrality $x_i$ of a node $n_i$ is the sum of its connections to other nodes, weighted by their centrality.
$$x_i= \frac{1}{\lambda}\sum_{j}A_{ij}x_j$$
It is like a recursive version of degree centrality. So a nodes importance (centrality) is inceased by having neighbours that are themselves important. Eigenvector centrality gives each vertex a score proportional to the sum of the scores of its neghbours.~\cite{newman2010networks}

\paragraph{Closeness Centrality}
Is is the average length of the shortes path between node $n_i$ to all other nodes in the network. The more central a node is the closer it is to all other nodes. Mean distance from a node to other nodes.~\cite{newman2010networks}

$$C_C^i=\frac{N}{\sum_{j}d_{ij}}$$

\paragraph{Betweenness Centrality}
It measures the extend to which a node lies on paths between other nodes. Nodes that occur on many shortest pathts between other nodes have higher betweenness that those that do not.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Temporal Networks}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Disjoint, Overlapping, Cumulative
[10] Börner, Katy, and David E. Polley. Visual insights: A practical guide to making sense of data. MIT Press (2014): 59p

Discrete - cumulativ, and (overlapping) time window and\\
continuous approach (interactions with start and end timestamp)\\
Moody James
Daniel McFarland, and 
Skye
Bender
deMoll
 Dynamic network
 visualization. American Journal of Sociology 110.4 (2005): 1206-1241.

Challenges: size of time interval, modeling nodes and edge weights, forgetting rate\\

time-ordered and time-aggregated~\cite{farine2015constructing}

discrete snapshot approach and  continuous approach~\cite{Pinter-Wollman2014}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Community Detection}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
To understand the large-scale structure of networks, one can look at the network's community structure. Communities are naturally occurring groups within a network, usually also called clusters, cohesive groups or modules and have no widely accepted, unique definition~\cite{palla2005uncovering}.
For my work, I adapt the definition according to~\textcite{barabasi2016network}: 
``In network science, we call a community a group of nodes that have a higher likelihood of connecting to each other than to nodes from other communities.''~\cite[p.~TODO]{barabasi2016network}. In contrast to a simple graph partition, the number and size of communities is not predetermined or set in advance.

Communities in animal social networks refer to groups of individuals that are associated more with each other than they are with the rest of the population. These communities reflect an intermediate level of social organization, which is located between the individual and population level~\cite{croft2008exploring}.

There are a lot of different approaches and algorithms who adress the detection of communities. \textcite{fortunato2010community} gives an extended overview of the various types of community detection algorithms.
Explaining any of those would be beyond the scope of this work. For example, traditional methods include algorithms based on graph partitioning, hierarchical clustering, and spectral clustering. There are also divisive and agglomerative algorithms.
The algorithms used in this work are described in the following sections and include the leading eigenvector~\cite{newman2006finding} and walktrap~\cite{pons2005computing} algorithm.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Modularity}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Modularity is a quantity, that measures the quality of a partitioning. It can be used to compare a community partition to another and decide for the better one. Modularity optimization is also used for community detection algorithms.

A high modularity of a network indicates more connection between nodes within a community and fewer connections between nodes of different communities. The basic idea is: If the fraction of links inside the community is higher, than expected in the same community of a related random graph having the same degree distribution, then it is a community in the sense of modularity. This difference is summed up and normalized. If all nodes fall into one community the modularity is $0$. Fewer links inside the community than expected result in a negative value, otherwise positive.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Leading Eigenvector and Walktrap}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The \emph{leading eigenvecor} algorithm was proposed by \textcite{newman2006finding}. It uses the eigenvectors of matrices for finding community structures in networks. It is a top-down hierarchical approach that optimizes modularity. The algorithm starts with all nodes inside one community, therefor a modularity of 0. In each step, the network is split into two parts, so that the modularity of the new separation increases. The splitting is done by first calculating the leading eigenvector of the modularity matrix and then splitting the graph in a way that modularity improvement is maximised based on the leading eigenvector. The algorithms stops if the modularity is not increasing anymore.

This \emph{walktrap} algorithm by~\textcite{pons2005computing} is based on random walks. The authors consider random walks as a tool to calculate similarity between nodes of a network. It uses a bottom-up hierarchical approch, that means the algorithms start with each node it is own community. The basic idea of walktrap is, that short distance random walks (the step size is a parameter) tend to stay in the same community, because there are only a few links that lead outside a given community.
The results of these random walks are used to merge separate communities.
Again modularity can be used to cut the dendrogram in an optimal place.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Communities in Temporal Networks}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{sec:bg:tracking}
According to \textcite{aynaud2013communities} and \textcite{brodka2014community} there are three main approaches for community detection in temporal networks (also called community tracking): (1) using a static community detection algorithm on several snapshots and then solving a matchig problem, (2) using algorithms who are directly suited for temporal networks and (3) using incremental or online algorithms when processing data streams. For each of the three approaches, several mehods already exist.

As community tracking is not the main focus of this work, I chose to apply the most intuitive approach aout of approach (1): detecting static communities for each snapshot and then matching those communities using set theory.  Two communities at successive timesteps are matched if they share enough nodes. The \emph{match value} (between 1 and 0) between two communities $C$ and $D$ according to~\cite{hopcroft2004tracking} is defined as:

\begin{equation}
\label{eq:match}
\texttt{match}(C,D) = \texttt{min}\left( \frac{\textbar C\cap D \textbar}{\textbar C\textbar }, \frac{\textbar C\cap D \textbar}{\textbar D \textbar }\right)
\end{equation}

A high match value accurse, when two communities share a lot of nodes and are of a similar size. Communities with the highest value are matched. A threshold should be applied to more precicley define what ``share enough nodes'' means.
